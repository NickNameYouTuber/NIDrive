import{c as h,e as x,f as y,g as f,j as t,B as s,h as o,T as n}from"./index-d88770ce.js";import{d as p}from"./Telegram-49bd6275.js";const A=()=>{const{login:c,isAuthenticated:l,loading:u}=h(),{enqueueSnackbar:a}=x(),g=y(),i=!1,d=async e=>{try{await c(e)?(a("Login successful",{variant:"success"}),g("/dashboard")):a("Login failed. Please try again.",{variant:"error"})}catch(r){console.error("Login error:",r),a("An error occurred during login",{variant:"error"})}};return f.useEffect(()=>{window.onTelegramAuth=m=>{d(m)};const e=document.createElement("script");e.src="https://telegram.org/js/telegram-widget.js?22",e.setAttribute("data-telegram-login","nidrivebot"),e.setAttribute("data-size","large"),e.setAttribute("data-radius","8"),e.setAttribute("data-request-access","write"),e.setAttribute("data-userpic","false"),e.setAttribute("data-onauth","onTelegramAuth(user)"),e.async=!0;const r=document.getElementById("telegram-login-container");return r&&(r.innerHTML="",r.appendChild(e)),()=>{r&&(r.innerHTML=""),delete window.onTelegramAuth}},[l,i]),u?t.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:t.jsx(o,{})}):t.jsxs(s,{sx:{width:"100%",textAlign:"center",py:3},children:[t.jsx(p,{color:"primary",sx:{fontSize:48,mb:2}}),t.jsx(n,{variant:"h4",gutterBottom:!0,children:"Sign in with Telegram"}),t.jsx(n,{variant:"body1",color:"textSecondary",paragraph:!0,sx:{mb:4},children:"Securely access your cloud storage using your Telegram account"}),i,t.jsx(s,{id:"telegram-login-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:60},children:t.jsx(o,{size:24})}),t.jsx(n,{variant:"body2",color:"textSecondary",sx:{mt:4},children:"By logging in, you agree to our Terms of Service and Privacy Policy"})]})};export{A as default};
